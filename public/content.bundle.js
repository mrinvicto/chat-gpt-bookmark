(()=>{"use strict";const e={getBookmarks(){const e=localStorage.getItem("chatGPTBookmarks");return e?JSON.parse(e):[]},saveBookmark(e){const t=this.getBookmarks();t.push(e),localStorage.setItem("chatGPTBookmarks",JSON.stringify(t))},bookmarkExists(e){return this.getBookmarks().some((t=>t.url===e))},getLocalBookmarkLink(){const e=sessionStorage.getItem("localBookmarkLink");return e?JSON.parse(e):null},setLocalBookmarkLink(e){sessionStorage.setItem("localBookmarkLink",JSON.stringify(e))}},t={findGroupsInSidebar:()=>document.querySelectorAll('div[class*="group/sidebar"]'),findMenuElement:()=>document.querySelector('div[role="menu"]'),findExistingMenuItem:e=>e?.querySelector('[role="menuitem"]'),createBookmarkDiv(e){const t=e.cloneNode(!0);return t.id="bookmark-convo-option",t.textContent="🔖 Bookmark",t},findBookmarkContainer:e=>Array.from(e.querySelectorAll("div.bg-token-sidebar-surface-primary"))[1],createBookmarksContainer(){const e=document.createElement("div");return e.id="inserted-div-id",e},removeBookmarkList(){const e=document.getElementById("inserted-div-id");e&&e.remove()}},r={generateBookmarkHTML:e=>`\n            <li class="relative" data-testid="history-item-3">\n                <div draggable="true" class="no-draggable group rounded-lg active:opacity-90 bg-[var(--item-background-color)] h-9 text-sm screen-arch:bg-transparent relative" style="--item-background-color: var(--sidebar-surface-primary);">\n                    <a class="motion-safe:group-active:screen-arch:scale-[98%] motion-safe:group-active:screen-arch:transition-transform motion-safe:group-active:screen-arch:duration-100 flex items-center gap-2 p-2" data-history-item-link="true" href="${e.url}" data-discover="true" style="mask-image: var(--sidebar-mask);">\n                        <div class="relative grow overflow-hidden whitespace-nowrap" dir="auto" title="${e.title}">${e.title}</div>\n                    </a>\n                </div>\n            </li>\n        `,generateBookmarksListHTML(){return e.getBookmarks().map(this.generateBookmarkHTML).join("")},createBookmarksSection(){return`\n            <div class="relative mt-5 first:mt-0 last:mb-5">\n                <div class="bg-token-sidebar-surface-primary sticky top-0 z-20">\n                    <span class="flex h-9 items-center">\n                        <h3 class="px-2 text-xs font-semibold text-ellipsis overflow-hidden break-all pt-3 pb-2 text-token-text-primary">Bookmarks</h3>\n                    </span>\n                </div>\n                <ol>\n                    ${this.generateBookmarksListHTML()}    \n                </ol>\n            </div>\n        `},handleBookmarkClick(){const r=e.getLocalBookmarkLink();if(!r)return void alert("No bookmark link found");const{url:o,title:n}=r;e.bookmarkExists(o)?alert(`✅ Already bookmarked: ${n}`):(e.saveBookmark(r),alert(`🔖 Bookmarked: ${n}`),t.removeBookmarkList())}};new MutationObserver((()=>{(()=>{const e=t.findMenuElement();if(!e)return;if(document.getElementById("bookmark-convo-option"))return;const o=t.findExistingMenuItem(e);if(!o)return;const n=t.createBookmarkDiv(o);n.onclick=r.handleBookmarkClick;const a=o.parentNode;a&&a.appendChild(n)})(),t.findGroupsInSidebar().forEach((e=>{const o=t.findBookmarkContainer(e);if(!o)return void console.error("❌ Target container not found.");if(document.getElementById("inserted-div-id"))return;const n=o.parentElement?.parentElement;if(!n)return void console.error("❌ Grandparent element is not available.");const a=n.parentElement;if(!a)return void console.error("❌ Grandparent's parent is not available.");const i=t.createBookmarksContainer();i.innerHTML=r.createBookmarksSection(),a.insertBefore(i,n)}))})).observe(document.body,{childList:!0,subtree:!0}),document.body.addEventListener("click",(t=>{const r=t.target;if(!r)return;const o=r.closest("button");if(!o)return;const n=o.closest("li");if(!n)return;const a=n.querySelector("a");if(a&&a.href){const t=a.childNodes[0];e.setLocalBookmarkLink({url:a.href,title:t.innerText})}}))})();